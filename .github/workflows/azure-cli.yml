name: azure cli and github actions

on: 
  workflow_dispatch:

    
jobs:

  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Azure Login
        uses: azure/login@v1
        with:
          creds: ${{ secrets.AZURE_CREDENTIALS }}
      
      - name: Checkout
        uses: actions/checkout@v1

      - name: Azure CLI Action
        uses: Azure/cli@v1
        with:
          azcliversion: 2.30.0
          inlineScript: |
            subscription=${{ secrets.AZURE_SUBSCRIPTION }}
            az account set -s $subscription
            az sql server create -n myserver -g react-dev -l eastus2 -u ${{ secrets.AZURE_SQL_SERVER_USERNAME }} -p ${{ secrets.AZURE_SQL_SERVER_PASSWORD }}
      
      # - name: Azure CLI - Create Azure SQL Databases
      #   uses: azure/CLI@v1
      #   with: 
      #     azcliversion: 2.30.0
      #     inlineScripts: |
      #       subscription=${{ secrets.AZURE_SUBSCRIPTION }}
      #       chmod +x $GITHUB_WORKSPACE/deploy/azureSqlDatabase.sh "${subscription}"
      #       $GITHUB_WORKSPACE/deploy/azureSqlDatabase.sh "${subscription}"
    